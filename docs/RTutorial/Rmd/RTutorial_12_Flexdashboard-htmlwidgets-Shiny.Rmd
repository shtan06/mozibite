---
title: "Session Twelve: Flexdashboard and RShiny"
author: "Estimated Duration: 30 minutes"
#runtime: shiny
output:
  html_document: 
    code_folding: show
    highlight: tango
    number_sections: no
    theme: sandstone
    toc: yes
    toc_depth: 5
    toc_float:
      collapsed: no
      smooth_scroll: yes
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```
<br>

[__<<__ Back to Menu](rtutorial_basic.html)  
[__>>__ Session Thirteen](RTutorial_13_RMarkdown-Websites-and-Github.html)

# {.tabset}

## Flexdashboard

### __Flexdashboard__

<br>

#### RStudio Flexdashboard Template

https://rmarkdown.rstudio.com/flexdashboard/index.html  

Go to File > New File > RMarkdown > From Template > Flex Dashboard  

The RMarkdown template contains a YAML (yet another markup language) header, text and code chunks that when knit, produces a dashboard layout with 3 charts (empty) split across 2 columns.  

![](/Users/user/Documents/RTutorial/Image/RTutorial_12_Flexdashboard_Template.png)
<br>
<br>

![](/Users/user/Documents/RTutorial/Image/RTutorial_12_Flexdashboard_Template_Knit.png)
<br>
<br>

Add some text and code in each column to generate a simple dashboard:  

![](/Users/user/Documents/RTutorial/Image/RTutorial_12_Flexdashboard_Example1.png)
<br>
<br>

**Design Layout**  

![](/Users/user/Documents/RTutorial/Image/RTutorial_12_Flexdashboard_Layout.png)
<br>
<br>

**Storyboards**  

https://rmarkdown.rstudio.com/flexdashboard/using.html#storyboards  

![](/Users/user/Documents/RTutorial/Image/RTutorial_12_Flexdashboard_Storyboard.png)
<br>
<br>

![](/Users/user/Documents/RTutorial/Image/RTutorial_12_Flexdashboard_Storyboard_Code.png)
<br>
<br>


**Adjust width and height**  
Column {data-width=600}  
Row {data-height=400}  

**Headers:**  
Level 1 Header # - begins a new page in the dashboard  
Level 2 Header ## - begins a new column  
Lever 3 Header ### - begins a new box  

**Sidebar**  
Example: Intro {.sidebr}  

**Variations in YAML:**  
orientation: columns  
orientation: row  
vertical_layout: fill  
vertical_layout: scroll  

<br>
<br>

## htmlwidgets/leaflet

### __htmlwidgets/leaflet__

<br>

#### Insert Co-ordinates

```{r}
library(leaflet)
#library(htmlwidgets)

leaflet() %>%
  addTiles() %>%
  addMarkers(lng=101.705, lat=3.16, popup="Somewhere in KL")
```
<br>

Check out:  
http://rstudio.github.io/leaflet/  
http://www.htmlwidgets.org/showcase_leaflet.html  

<br>
<br>

## Shiny

### __Shiny__

<br>
Go to File > New File > R Markdown > Shiny

The following is a section of the template which we shall run here. You just need to add the line: "runtime: shiny" in YAML above. Note that this tutorial does not cover shiny web app.  

```{r eruptions, eval=FALSE}
inputPanel(
  selectInput("n_breaks", label = "Number of bins:",
              choices = c(10, 20, 35, 50), selected = 20),
  
  sliderInput("bw_adjust", label = "Bandwidth adjustment:",
              min = 0.2, max = 2, value = 1, step = 0.2)
)

renderPlot({
  hist(faithful$eruptions, probability = TRUE, breaks = as.numeric(input$n_breaks),
       xlab = "Duration (minutes)", main = "Geyser eruption duration")
  
  dens <- density(faithful$eruptions, adjust = input$bw_adjust)
  lines(dens, col = "blue")
})
```

<br>
<br>
